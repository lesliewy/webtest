==============================================myself======================================================================================

#echo "=============================== sed command ============================="
#  sed -e 's/bash/xxxx/g' -e 's/xxxx/yyyy/g' ps_ax.txt 这两种都是对的. -e 表明后面的脚本也要执行, 如果要执行多个脚本，每一个都要加-e,包括第一个.
#  sed 's/bash/xxxx/g' 's/xxxx/yyyy/g' ps_ax.txt 则只会执行前面一句，后面的不执行.
#  sed 's/bash/xxxx/g' ps_ax.txt  :  单句加不加-e无所谓了.

#  sed -i.bak -e '/USER/=' ps_aux.txt  : -i inplace-text,即时修改原文件,如果后面没有扩展名bak,则直接修改原文件，此处将原文件备份为ps_aux.txt.bak
# sed -f sed.sh filename

# sed 中如果前面的语句条件不满足，没有执行，会执行下一个语句。而不是读入下一行.
# 如: sed -n '/USER/l;=' abc    即使abc文件中没有USER,也会输出每一行的行号.

# ============================ 寻址 ==========================================
# 1,指定行号,没有行号则删除所有行.
#5d                              # 删除第5行.
# 2,模式匹配一行, 必须在/ /之间, 没有匹配到则一行都不删.
#/66/d                           # 删除匹配的那一行.
# 3,行号指定范围. 负数会报错, 后者若超过最后一行，认为删除到最后.
#5,10d                            # 删除第5行(包括) - 第10行(包括)的6行内容.       
# 4,模式匹配指定范围,前者没有匹配就不删除任何一行; 前者匹配，后者没有匹配就删除前者匹配的至最后.
#/66/,/77/d                       # 删除匹配的行之间(都包括)的所有行.
# 5,指定行号,模式匹配一起使用,后者没有匹配就删除指定行号至最后.
#5,/66/d                          # 删除第5行至匹配66的行.

# $匹配文件的最后一行.
#5,$d
# d 前的 ! 使意思反转: 第5行至匹配66的行不删除，其他都删除.
#5,/66/!d

#============================= 替换 ==============================================
# 将每一行的5替换为555
#s/5/555/g
# 将每一行的内容都复制一遍加在后面:利用&
#s/.*/&  &  &/g
#将出现aa 和 bb 的行中内容,修改为bb cc aa: 利用了\n,正则表达式部分必须转义使用(和).
#s/\(aa\).*\(bb\)/\2 cc  \1/g

#s/pig/cow/g
#s/cow/horse/g
#     conclusion:  sed脚本中的所有命令会应用到文本上的每一行;  sed 不会保存原始的行，就是说上面的命令输出是下面命令的输入.
#============================= 追加、插入、修改===================================
#sed -e '/USER/i\aaa' ps_aux.txt     # 插入模式匹配.  在包含USER行前插入一行aaa

# 在每行前面插入两行a和b，多行文本用\， 要确保\后面没有空白字符.
# 插入命令在模式空间行之前.
# 下面3行后面都不能加注释, 最好将注释加在一行的开始处.
#i\
#a\
#b

# 在每行后面追加两行.
# 追加命令在模式空间行之后.
#法1和下面的法2结果一样,但一般都使用下面2那种.
#a\c\nd
#法2
#a\
#c\
#d

# 修改每一行为abc,注意与替换命令的不同,替换是只替换匹配的内容,而修改是改变整行.
# 修改命令会修改模式空间的内容
#c\
#abc
# 将出现aa 和 bb 的行内容修改为bb aa,注意它修改的是整行内容，而不只是aa和bb之间的部分,和替换不一样.
#/aa.*bb/c\
#bb aa
# 将10－15行内容修改为abc,修改后只剩这一行abc了.
#10,15c\
#abc
# 如果c是作用在一个范围的行,则与上面的不一样,这里会将6行内容都修改为abc。
#10,15{
#  c\
#abc
#}


#================================== 列表 打印 打印行号 下一行==================================
# 列表命令l 输出当前行内容,包括不可打印字符.
#l
# 打印命令,只是输出当前模式空间中的行内容. 当使用抑制输出参数时有用. sed -n
#p

# 在地址后面加一个 =，输出当前的行号.即使sed -n 时也会输出,和p一样.         
# [lineadrress]=
# 输出每一行行号
#=
# 输出第5行行号
#5=
# 输出包含1的行号.
#/1/=

# 下一行命令n : 输出当前行，然后读入下一行内容到模式空间.  所以后面的命令不能再作用于该行上了.
#n
#p

#================================= 读文件 写文件====================================================
# 在第3行之后读入文件test1.awk中的内容.
#3r test1.awk

# 将所有包含1的行写入文件test2.awk中, 同一个sed 文件写入同一个文件，会追加在后面.
#/1/w test2.awk

#================================= 退出 ============================================================
# [lineaddress]q
# 在第5行输出后结束.
#5q





#==================================高级命令=========================================================
# 多行模式空间命令N
# 在第2行时读入下一行,注意此时的行号是3.  另外2N,表示在第2行时读入下一行，此时模式空间中有2行内容.  没有办法一次读入多个行. 
#   2N
#   =
# 在包含bb的行时，读入下一行到模式空间,此时模式空间有2行内容, 查找匹配  bb 换行 11的内容,并将该部分替换为aa 12
#/bb/{
#   N
#   s/bb.*\n.*11/aa 12/g
#}

# 多行模式空间时只删除首行命令D, 会改变流控制，回到脚本首部开始执行.
# 多个空行只保留一个: 如果是小d,则所有偶数个空行时会有问题，将所有空行都删除. 因为d是删除整个模式空间的内容.
#/^$/{
#   N
#   /^\n$/D
#}

# 多行模式空间时只输出第一行命令P
# 始终维持模式空间2行.
#/11/{
#   N
#   P
#   D
#}

# 跳转命令b  有条件跳转命令t

#/3/b mylabel1
#:mylabel1
#l
#n

# h:hold 将当前行复制一份放入保持空间.
# g:get 从保持空间中取出内容并修改模式空间的内容.
# 如果是使用change命令修改模式空间的内容的话,则g后无效果.
#/10/{
#   h
#s/aa/cc/
#g
#}



